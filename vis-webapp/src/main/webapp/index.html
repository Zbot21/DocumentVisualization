<!DOCTYPE html>
<!--
  ~ The MIT License (MIT)
  ~
  ~ Copyright (c) 2015 Chris Bellis, Chris Perry
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in
  ~ all copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  ~ THE SOFTWARE.
  -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css"/>
    <title>Tier 1 Visualization</title>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>-->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>-->
    <script src="libs/d3.js"></script>
    <script src="libs/jquery.js"></script>
    <script src="js/multiTermGraph.js"></script>
    <script src="js/searchUtils.js"></script>
    <!--<script src="js/forceGraphV2.js"></script>-->
    <script>
        function displayDocument(docId){
            var docInfo = document.getElementById("documentInfo");
            docInfo.innerHTML = "";
            appendMetadata(docInfo, docId);
        }

        $(document).ready(function(){
            document.getElementById("searchButton").addEventListener("click", createGraph);
            function createGraph(){
                var chart = forceChart();
                var query1 = document.getElementById("query1").value;
//                var query1Call = $.getJSON("synonyms?term="+query1, function(data){
//                    if(data == null) return;
//                    data.forEach(function(syn){
//                        query1 += " " + syn;
//                    });
//                });
                var query2 = document.getElementById("query2").value;
//                var query2Call = $.getJSON("synonyms?term="+query2, function(data){
//                    if(data == null) return;
//                    data.forEach(function(syn){
//                        query2 += " " + syn;
//                    })
//                })
                var query3 = document.getElementById("query3").value;
//                var query3Call = $.getJSON("synonyms?term="+query3, function(data){
//                    if(data == null) return;
//                    data.forEach(function(syn){
//                        query3 += " " + syn;
//                    })
//                });

                d3.json("multi_term_search?vis&query1="+query1+"&query2="+query2+"&query3="+query3, function(error, data) {
                    if (error) throw error;
                    d3.select("#main").datum(data).call(chart);
                });

//                query1Call.done(function(){
//                    query2Call.done(function(){
//                        query3Call.done(function(){
//                            // TODO: Handle null queries
//                            d3.json("multi_term_search?vis&query1="+query1+"&query2="+query2+"&query3="+query3, function(error, data) {
//                                if (error) throw error;
//                                d3.select("#main").datum(data).call(chart);
//                            });
//                        });
//                    });
//                });

            }
        });
    </script>
</head>
<body>
<div class="sidebar" id="content">
    <input id="query1" type="search" value="visualization"/><br>
    <input id="query2" type="search" value="virtualization"/><br>
    <input id="query3" type="search" value="test"/><br><br>
    <button id="searchButton">Search</button><br>
    <div id="documentInfo"></div>
</div>
<div class="content" id="main"></div>
<div class="footer">
    Data Provided by <a href="http://research.google.com">Google Research</a>
</div>
</body>
</html>